*------------------------------------------------------------*
* Training Log
Date:                April 24, 2020
Time:                18:51:48
*------------------------------------------------------------*
11424  proc freq data=EMWS2.Trans2_VariableSet noprint;
11425  table ROLE*LEVEL/out=WORK.Trans2META;
11426  run;

NOTE: There were 97 observations read from the data set EMWS2.TRANS2_VARIABLESET.
NOTE: The data set WORK.TRANS2META has 7 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

11427  proc print data=WORK.Trans2META label noobs;
11428  var ROLE LEVEL COUNT;
11429  label ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel, NOQUOTE))" LEVEL = "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel, NOQUOTE))";
11430  title9 ' ';
11431  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_varSummary_title  , NOQUOTE))";
11432  run;

NOTE: There were 7 observations read from the data set WORK.TRANS2META.
NOTE: The PROCEDURE PRINT printed page 1.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

11433  title10;

11434  data WORK.M2DTQCD7;
11435  set WORK.M2DTQCD7;
11436  if (METHOD='NONE' and ROLE ne 'FREQ') or (role = 'REJECTED' and METHOD = 'DEFAULT') then delete;
11437  run;

NOTE: There were 97 observations read from the data set WORK.M2DTQCD7.
NOTE: The data set WORK.M2DTQCD7 has 92 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

NOTE: There were 48356 observations read from the data set DATA.CATALOG2010.
NOTE: View EMWS2.TRANS_TRAIN.VIEW used (Total process time):
      real time           1.76 seconds
      cpu time            0.14 seconds
      
NOTE: There were 48356 observations read from the data set EMWS2.IDS_DATA.
11502  *------------------------------------------------------------*;
11503  * Trans: Computing Summary Statistics;
11504  *------------------------------------------------------------*;
11505  data WORK.M1MCU9ZZ;
11506  set WORK.M1MCU9ZZ;
11507  if (role = 'REJECTED') then role = 'INPUT';
11508  run;

NOTE: There were 92 observations read from the data set WORK.M1MCU9ZZ.
NOTE: The data set WORK.M1MCU9ZZ has 92 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

11509  *------------------------------------------------------------* ;
11510  * EM: DMDBClass Macro ;
11511  *------------------------------------------------------------* ;
11512  %macro DMDBClass;
11513      BOTHPAYM(ASC) CCPAYM(ASC) METHPAYM(ASC) PCPAYM(ASC) RESPOND(DESC)
11514  %mend DMDBClass;
11515  *------------------------------------------------------------* ;
11516  * EM: DMDBVar Macro ;
11517  *------------------------------------------------------------* ;
11518  %macro DMDBVar;
11519      ACTBUY BUYPROP CATALOGCNT DAYLAST_REV DEPT01 DEPT02 DEPT03 DEPT04 DEPT05
11520     DEPT06 DEPT07 DEPT08 DEPT09 DEPT10 DEPT11 DEPT12 DEPT13 DEPT14 DEPT15 DEPT16
11521     DEPT17 DEPT18 DEPT19 DEPT20 DEPT21 DEPT22 DEPT23 DEPT24 DEPT25 DEPT26 DEPT27
11522     DOLINDEA DOLINDET DOLL24 DOLLARQ01 DOLLARQ02 DOLLARQ03 DOLLARQ04 DOLLARQ05
11523     DOLLARQ06 DOLLARQ07 DOLLARQ08 DOLLARQ09 DOLLARQ10 DOLLARQ11 DOLLARQ12 DOLLARQ13
11524     DOLLARQ14 DOLLARQ15 DOLLARQ16 DOLLARQ17 DOLLARQ18 DOLLARQ19 DOLLARQ20 DOLLARQ21
11525     DOLLARQ22 DOLNETDA DOLNETDT FREQPRCH MONLAST ORDERSIZE TENURE TOTORDQ01
11526     TOTORDQ02 TOTORDQ03 TOTORDQ04 TOTORDQ05 TOTORDQ06 TOTORDQ07 TOTORDQ08 TOTORDQ09
11527     TOTORDQ10 TOTORDQ11 TOTORDQ12 TOTORDQ13 TOTORDQ14 TOTORDQ15 TOTORDQ16 TOTORDQ17
11528     TOTORDQ18 TOTORDQ19 TOTORDQ20 TOTORDQ21 TOTORDQ22 UNITSIDD UNITSLAP UNTLANPO
11529  %mend DMDBVar;
11530  *------------------------------------------------------------*;
11531  * EM: Create DMDB;
11532  *------------------------------------------------------------*;
11533  proc dmdb batch data=EMWS2.Trans_TRAIN
11534  dmdbcat=WORK.EM_DMDB
11535  classout=WORK.Transclassout
11536  maxlevel = 513
11537  ;
11538  class %DMDBClass;
11539  var %DMDBVar;
11540  target
11541  ORDERSIZE
11542  RESPOND
11543  ;
11544  run;

NOTE: Records processed = 48356   Memory used = 511K.
NOTE: There were 48356 observations read from the data set DATA.CATALOG2010.
NOTE: View EMWS2.TRANS_TRAIN.VIEW used (Total process time):
      real time           0.17 seconds
      cpu time            0.15 seconds
      
NOTE: There were 48356 observations read from the data set EMWS2.IDS_DATA.
NOTE: There were 48356 observations read from the data set EMWS2.TRANS_TRAIN.
NOTE: The data set WORK.TRANSCLASSOUT has 12 observations and 9 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.20 seconds
      cpu time            0.18 seconds
      

11545  quit;
11546  *--- end code ---*;

11547  data WORK.TransINTERVALMETA;
11548  set WORK.M2DTQCD7;
11549  if LEVEL ne 'INTERVAL' then delete;
11550  run;

NOTE: There were 92 observations read from the data set WORK.M2DTQCD7.
NOTE: The data set WORK.TRANSINTERVALMETA has 87 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

11551  *------------------------------------------------------------*;
11552  * Trans: Determining Variables to Scale;
11553  *------------------------------------------------------------*;
11554  data WORK.M1ILPJ9W;
11555  set WORK.M1ILPJ9W;
11556  where (TYPE="N" and (METHOD in("MAX_NORM", "MAX_CORR", "EQUALIZE", "OP_MAX_NORM", "OP_EQUALIZE"))) or (ROLE eq "FREQ");
11557  run;

NOTE: There were 0 observations read from the data set WORK.M1ILPJ9W.
      WHERE ((TYPE='N') and METHOD in ('EQUALIZE', 'MAX_CORR', 'MAX_NORM', 'OP_EQUALIZE', 'OP_MAX_NORM')) or (ROLE='FREQ');
NOTE: The data set WORK.M1ILPJ9W has 0 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

11560  *------------------------------------------------------------*;
11561  * Trans: Computing quantile transformations;
11562  *------------------------------------------------------------*;
11563  %em_varMacro(name=EM_PCTLBINVAR, metadata=WORK.METASET04SUU0N, key=NAME);

NOTE: The file MACFILE is:
      Catalog Name=WORK.EMUTIL.MACRO.SOURCE,
      Catalog Page Size=4096,
      Number of Catalog Pages=4,
      Created=Fri, Apr 24, 2020 06:51:51 PM,
      Last Modified=Fri, Apr 24, 2020 06:51:51 PM,
      Filename=C:\Users\skokse_uncc\AppData\Local\Temp\74\SAS Temporary Files\_TD7800_MSNV-UNCC1-RDS2_\emutil.sas7bcat,
      Release Created=9.0401M5,
      Host Created=X64_DSRV16,
      Owner Name=APPORTO\skokse_uncc,
      File Size=             5KB,
      File Size (bytes)=5120

NOTE: 3 records were written to the file MACFILE.
      The minimum record length was 20.
      The maximum record length was 36.
NOTE: There were 3 observations read from the data set WORK.METASET04SUU0N.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

NOTE: Fileref MACFILE has been deassigned.
11567  data work.EM_TRANS_STDIZE / view=work.EM_TRANS_STDIZE;
11568  set EMWS2.Trans_TRAIN(keep=%EM_PCTLBINVAR );
11569  run;

NOTE: DATA STEP view saved on file WORK.EM_TRANS_STDIZE.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS2.TRANS_TRAIN.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
      

11570  data work.TRANS_QUANTMETADS;
11571  set WORK.METASET04SUU0N;
11572  if NUMBINS eq . then NUMBINS=4;
11573  run;

NOTE: There were 3 observations read from the data set WORK.METASET04SUU0N.
NOTE: The data set WORK.TRANS_QUANTMETADS has 3 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

11574  proc sort data=work.TRANS_QUANTMETADS;
11575  by NUMBINS NAME;
11576  run;

NOTE: There were 3 observations read from the data set WORK.TRANS_QUANTMETADS.
NOTE: The data set WORK.TRANS_QUANTMETADS has 3 observations and 22 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

11577  data _null_;
11578  set work.TRANS_QUANTMETADS;
11579  length pctlString $200;
11580  length VarString $80;
11581  retain VarString '';
11582  retain Count 0;
11583  by Numbins;
11584  if first.numbins then do;
11585  count + 1;
11586  pctlString = '';
11587  call execute("proc stdize data=work.EM_TRANS_STDIZE outstat=WORK.TransBIN_PCTL out=_null_
11588              pctlpts=");
11589  do i=1 to numbins -1;
11590  pctlString = strip(pctlString)!!' '!!strip(put(i*100/numbins, 5.1));
11591  end;
11592  call execute(strip(pctlString)!!";");
11593  call execute("var ");
11594  VarString = strip(NAME);
11595  end;
11596  else do;
11597  if length(strip(VarString)) + length(strip(NAME)) + 1 < 80 then VarString = strip(VarString)!!' '!!strip(NAME);
11598  else do;
11599  call execute(varString);
11600  VarString = NAME;
11601  end;
11602  end;
11603  if last.numbins then do;
11604  call execute(varString!!';');
11605  call execute("run;");
11606  if count = 1 then call execute("data  WORK.Trans_PCTL;");
11607  else call execute("data  WORK.TransBIN_PCTL;");
11608  call execute("   length _PCTLPTS 8;");
11609  call execute("   set WORK.TransBIN_PCTL(where=(_type_=:'P'));");
11610  call execute("   _PCTLPTS = input(substr(tranwrd(_TYPE_, '_', '.'), 2), best.);");
11611  call execute("run;");
11612  if count ne 1 then do;
11613  call execute("data WORK.Trans_PCTL;");
11614  call execute("   merge WORK.Trans_PCTL WORK.TransBIN_PCTL;");
11615  call execute("   by _PCTLPTS;");
11616  call execute("run;");
11617  end;
11618  end;
11619  run;

NOTE: There were 3 observations read from the data set WORK.TRANS_QUANTMETADS.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

NOTE: CALL EXECUTE generated line.
1     + proc stdize data=work.EM_TRANS_STDIZE outstat=WORK.TransBIN_PCTL out=_null_            pctlpts=
2     + 20.0 40.0 60.0 80.0;
3     + var
4     + DAYLAST_REV DOLL24 FREQPRCH                                                     ;
5     + run;

NOTE: There were 48356 observations read from the data set DATA.CATALOG2010.
NOTE: There were 48356 observations read from the data set EMWS2.IDS_DATA.
NOTE: View WORK.EM_TRANS_STDIZE.VIEW used (Total process time):
      real time           0.21 seconds
      cpu time            0.21 seconds
      
NOTE: There were 48356 observations read from the data set EMWS2.TRANS_TRAIN.
NOTE: There were 48356 observations read from the data set WORK.EM_TRANS_STDIZE.
NOTE: The data set WORK.TRANSBIN_PCTL has 12 observations and 4 variables.
NOTE: PROCEDURE STDIZE used (Total process time):
      real time           0.21 seconds
      cpu time            0.21 seconds
      

6     + data  WORK.Trans_PCTL;
7     +    length _PCTLPTS 8;
8     +    set WORK.TransBIN_PCTL(where=(_type_=:'P'));
9     +    _PCTLPTS = input(substr(tranwrd(_TYPE_, '_', '.'), 2), best.);
10    + run;

NOTE: There were 4 observations read from the data set WORK.TRANSBIN_PCTL.
      WHERE _type_=:'P';
NOTE: The data set WORK.TRANS_PCTL has 4 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

NOTE: View EMWS2.TRANS_TRAIN.VIEW used (Total process time):
      real time           0.59 seconds
      cpu time            0.54 seconds
      
NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of this session.
*------------------------------------------------------------* 
*  Trans: Creating EMWS2.Trans2_RESULT 
*------------------------------------------------------------* 
WARNING: Multiple lengths were specified for the BY variable NAME by input data sets. This might cause unexpected results.

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.07 seconds
      cpu time            0.01 seconds
      

11664  data EMWS2.Trans2_RESULT;
11665  length NAME $32 FORMULA $70 POWER 8 ROLE $32 LEVEL $10 INPUTNAME $32 INPUTTYPE $1 LABEL $44;
11666  label INPUTNAME ='Input Name' NAME='Name' POWER='Power' FORMULA='Formula' ROLE='Role' INPUTLEVEL='Input Level' LEVEL='Level' INPUTTYPE='Input Type' TYPE='Type';
11667  set EMWS2.Trans2_RESULT;
11668  if INPUTNAME = '' then INPUTNAME = "Mixture of variables";
11669  run;

NOTE: There were 3 observations read from the data set EMWS2.TRANS2_RESULT.
NOTE: The data set EMWS2.TRANS2_RESULT has 3 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.15 seconds
      cpu time            0.01 seconds
      

11670  data WORK.M3RR0U3K;
11671  set WORK.M3RR0U3K;
11672  if ROLE='REJECTED' then ROLE='INPUT';
11673  run;

NOTE: There were 3 observations read from the data set WORK.M3RR0U3K.
NOTE: The data set WORK.M3RR0U3K has 3 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

*------------------------------------------------------------* 
*  Trans: Computing summary statistics for transformed variables 
*------------------------------------------------------------* 
11800  data WORK.TRANSFOR_0H6MM_G_STATISTIC;
11801  set WORK.Trans_TEMP;
11802  run;

NOTE: There were 3 observations read from the data set WORK.TRANS_TEMP.
NOTE: The data set WORK.TRANSFOR_0H6MM_G_STATISTIC has 3 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

11803  %exploreSample(DATA=EMWS2.Trans_TRAIN, OUTPUT=EMWS2.Trans2_SAMPLE_DATA, METADATA=EMWS2.Trans_CMeta_TRAIN, VARS=, METHOD=FIRSTN, SIZE=DEFAULT, ALPHA=0.01, PVALUE=0.01, SEED=12345);
NOTE: Fileref X has been deassigned.
NOTE: EXPLOREOBS EMWS2.Trans_TRAIN : vars= 99 : recl= 768 : max=20000 : def= 2000
PERFORMANCE  DETAILS
*------------------------------------------------------------*
* FirstN/Top sample
*------------------------------------------------------------*

NOTE: There were 48356 observations read from the data set DATA.CATALOG2010.
NOTE: View EMWS2.TRANS_TRAIN.VIEW used (Total process time):
      real time           0.12 seconds
      cpu time            0.09 seconds
      
NOTE: There were 48356 observations read from the data set EMWS2.IDS_DATA.
NOTE: There were 2000 observations read from the data set EMWS2.TRANS_TRAIN.
NOTE: The data set EMWS2.TRANS2_SAMPLE_DATA has 2000 observations and 99 variables.
NOTE: DATA statement used (Total process time):
      real time           0.29 seconds
      cpu time            0.11 seconds
      


11980  proc print data = EMWS2.Trans2_RESULT(obs=500) noobs label;
11981  title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_computedtransformations_title, NOQUOTE))";
11982  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_maxObsPrinted_title, NOQUOTE))";
11983  var INPUTNAME ROLE INPUTLEVEL NAME LEVEL FORMULA;
11984  run;

NOTE: There were 3 observations read from the data set EMWS2.TRANS2_RESULT.
NOTE: The PROCEDURE PRINT printed page 2.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

11985  title9;
11986  title10;

